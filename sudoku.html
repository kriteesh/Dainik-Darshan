<html>
	<head>
		<title>सुडोकु</title>
		<meta name="google" content="notranslate">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="manifest" href="manifest.json">
		<meta name="viewport" content="width=device-width">
		<meta name="mobile-web-app-capable" content="yes">
		<link rel="icon" sizes="192x192" href="assets/sudokus.png">
		<link href="https://fonts.googleapis.com/css?family=Khand" rel="stylesheet">
		<link rel="stylesheet" href="css/animate.css">
		<script src="js/sudoku.js"></script>
		<script src="js/sweetAlert.min.js"></script>
		<style>
			html,body{
				margin : 0;
				width : 100%;
				height : 100%;
				overflow : hidden;
				background-color: #fff; 
				background-image: 
				linear-gradient(90deg, transparent 79px, #abced4 79px, #abced4 81px, transparent 81px),
				linear-gradient(#eee .1em, transparent .1em);
				background-size: 100% 1.2em;
			}
			.container{
				display:none;
				grid-template-rows : 65vh 35vh;
				grid-template-columns: 2vw 96vw 2vw;
				grid-template-areas: 'game game game'
									 'bl ff br';
				justify-items :center;
				width : 100%;
				height : 100%;
				padding-top : 2vh;
			}
			
			.game{
				grid-area : game;
				display: grid;
				grid-template-rows: repeat(9,1fr);
				grid-template-columns: repeat(9,1fr);
				z-index : 2;
				user-select: none;
				 
			}
			.cell{
				grid-row : auto;
				grid-column	:auto;
				border : 1px solid black;
				text-align: center;
				font-size : 4.0vh;
				z-index : 2;
			}
			.boxer{
				grid-area : game;
				display: grid;
				grid-template-rows: repeat(3,1fr);
				grid-template-columns: repeat(3,1fr);
				
			}
			.boxerCell{
				grid-row : auto;
				grid-column	:auto;
				border : 2.5px solid #151515;
				
			}
			.answerGrid {
				grid-area : ff;
				display : flex;
				flex-direction : row;
				background-color : white;
				flex-wrap: wrap;
  				align-content: center;
				z-index:2;
				justify-content: center;
				background: transparent;
				align-self: start;
			}
			.insertCell{
				border-radius: 50%;
				font-size: 4.5vh;
				line-height: 7.7vh;
				text-align: center;
				cursor: pointer;
				width: 8vh;
				background: #5959ffb8;
				margin: 2vw;
				user-select: none;
				color : white;
				box-shadow: 2px 4px grey;
				font-family: 'Khand', sans-serif;
			}
			.insertCell:active{
				-webkit-transform:scale(0.9); 
				-moz-transform:scale(0.9); 
				-ms-transform:scale(0.9); 
				-o-transform:scale(0.9); 
				transform:scale(0.9); 
				-webkit-box-shadow:0px 0px 20px #FFF; 
				-moz-box-shadow:0px 0px 20px #FFF; 
				-o-box-shadow:0px 0px 20px #FFF; 
				box-shadow:0px 0px 20px #FFF; 
			}
			
			.difficulty {
				display : grid;
				width : 100%;
				height : 100%;
				grid-template-rows: repeat(5,1fr);
				align-items: center;
				justify-items : center;
				user-select: none;
				font-family: 'Khand', sans-serif;
			}
			
			.levels {
				grid-row : auto;
				color : white;
				border-radius : 10%;
				background: #5959ffb8;
				text-align: center;
				font-size : 5vh;
				width : 30vh;
				cursor : pointer;
			}
			.heading{
				color : #151515;
				font-size : 15vh;
				text-align: center;
				background: transparent;
			}
			.directions{
				font-size : 3vh;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="game">
			</div>
			<div class="boxer">
			</div>
			<div class="answerGrid animated shake">
		</div>
		</div>
		<div class="difficulty">
				<div class="heading levels">सुडोकु</div>
				<div class="levels animated bounceInleft" onclick = "setGame('easy')">आसान 
				</div>
				<div class ="levels animated bounceInRight" onclick = "setGame('medium')">सामान्य 
				</div>
				<div class ="levels animated bounceInDown" onclick = "setGame('hard')">कठिन 
				</div>
		</div>
		
	</body>
	<script>
		
		
		let difficulty = document.getElementsByClassName('difficulty')[0];
		
		let setGame = (type) =>
		{
			document.getElementsByClassName('container')[0].style.display = 'grid';
			
			difficulty.style.display = "none";
			
			
			var extend = function (obj1,obj2) {
				var extended = {};
				for (var prop1 in obj1) {
					if (obj1.hasOwnProperty(prop1)) {
						extended[prop1] = obj1[prop1];
					}
				}
				for (var prop2 in obj2) {
					if (obj2.hasOwnProperty(prop2)) {
					
						extended[prop2] = obj2[prop2];
					}
				}
				return extended;
			};
		
			
			let puzzle = sudoku.generate(type);
			let solution = sudoku.solve(puzzle); 
			
			let emptied = {A1:" ",A2:" ",A3:" ",A4:" ",A5:" ",A6:" ",A7:" ",A8:" ",A9:" ",B1:" ",B2:" ",B3:" ",B4:" ",B5:" ",B6:" ",B7:" ",B8:" ",B9:" ",C1:" ",C2:" ",C3:" ",C4:" ",C5:" ",C6:" ",C7:" ",C8:" ",C9:" ",D1:" ",D2:" ",D3:" ",D4:" ",D5:" ",D6:" ",D7:" ",D8:" ",D9:" ",E1:" ",E2:" ",E3:" ",E4:" ",E5:" ",E6:" ",E7:" ",E8:" ",E9:" ",F1:" ",F2:" ",F3:" ",F4:" ",F5:" ",F6:" ",F7:" ",F8:" ",F9:" ",G1:" ",G2:" ",G3:" ",G4:" ",G5:" ",G6:" ",G7:" ",G8:" ",G9:" ",H1:" ",H2:" ",H3:" ",H4:" ",H5:" ",H6:" ",H7:" ",H8:" ",H9:" ",I1:" ",I2:" ",I3:" ",I4:" ",I5:" ",I6:" ",I7:" ",I8:" ",I9:" "}
		

			puzzle = extend(emptied,puzzle);
			let values = Object.values(puzzle);
			solution = Object.values(solution);
           
	
			
			let answerGrid = document.getElementsByClassName('answerGrid')[0];


			let openCell = -1;

			let insertCell = new Array(14).fill(1).map((x,i)=>{ 
				x = document.createElement('div');
				x.className = 'insertCell';
				if(i<9)  { 
					x.innerText = i+1;
					x.addEventListener('click', function (e) {
					document.getElementsByClassName('cell')[openCell].innerText = i+1;
	//				document.getElementsByClassName('cell')[openCell].style.backgroundColor = "transparent";

					},false);
				}
				else if(i==9) {
					x.innerText ="✕";
					x.addEventListener('click', function (e) {
					document.getElementsByClassName('cell')[openCell].innerText = " ";
	//				document.getElementsByClassName('cell')[openCell].style.backgroundColor = "transparent";

					},false);
				}
				else if(i==11) {
					x.innerText = 'चैक';
					x.className = " insertCell directions";
					x.addEventListener('click', function (e) {

	//				document.getElementsByClassName('cell')[openCell].style.backgroundColor = "transparent";
					swal({
					  title: "ठहरिये",
					  text: "क्या आप मूल्याङ्कन करना चाहते है ?",
					  icon: "warning",
					  buttons: true,
					  dangerMode: true,
					})
					.then((willDelete) => {
					  if (willDelete) {
							check(1);
					  }
					});
					},false);	
				}
				else if(i==13) {
					x.innerText = '⇥';
					x.addEventListener('click', function (e) {

	//				document.getElementsByClassName('cell')[openCell].style.backgroundColor = "transparent";

					swal({
					  title: "ठहरिये",
					  text: "क्या आपको नई सुडोकु चाहिए !!",
					  icon: "warning",
					  buttons: true,
					  dangerMode: true,
					})
					.then((willDelete) => {
					  if (willDelete) {
							location.reload();
					  }
					});
					},false);	
				}
				else if(i==12) {
					x.innerText = 'हल';
					x.className = " insertCell directions";
					x.addEventListener('click', function (e) {

	//				document.getElementsByClassName('cell')[openCell].style.backgroundColor = "transparent";
					swal({
					  title: "ठहरिये",
					  text: "क्या आप हल देखना चाहते है ?",
					  icon: "warning",
					  buttons: true,
					  dangerMode: true,
					})
					.then((willDelete) => {
					  if (willDelete) {
							check(2);
					  }
					});
					},false);	
				}

				else if(i==10) {
					x.innerText = 'पुनः';
					x.className = " insertCell directions";
					x.addEventListener('click', function (e) {

	//				document.getElementsByClassName('cell')[openCell].style.backgroundColor = "transparent";
					swal({
					  title: "ठहरिये",
					  text: "क्या आप सब हटाना चाहते है?",
					  icon: "warning",
					  buttons: true,
					  dangerMode: true,
					})
					.then((willDelete) => {
					  if (willDelete) {
							check(3);
					  }
					});
					},false);	
				}

				answerGrid.appendChild(x);
			});

			let insertion = (x) => {


				if(openCell!=-1) {document.getElementsByClassName('cell')[openCell].style.backgroundColor = "transparent";}

				openCell = x;
				document.getElementsByClassName('cell')[openCell].style.backgroundColor = "#ead620c4";	
			}

			let boxer = document.getElementsByClassName("boxer")[0];
				if(screen.width < screen.height)
					{
				boxer.style.width = '98%';
				boxer.style.height = boxer.clientWidth;
					}
				else{
					boxer.style.height = '98%';
					boxer.style.width = boxer.clientHeight;
				}	

			let boxerCell = new Array(9).fill(1).map(x=>{ 
				x = document.createElement('div');
				x.className = 'boxerCell';
				boxer.appendChild(x);
			})

			let game = document.getElementsByClassName("game")[0];
				if(screen.width < screen.height)
					{
				game.style.width = '98%';
				game.style.height = game.clientWidth ;
					}

				else{
					game.style.height = '98%';
					game.style.width = game.clientHeight;
				}	

			let cells = new Array(81).fill(1).map((x,i)=>{ 
				x = document.createElement('div');
				x.className = 'cell';
				x.classList.add('bounceIn');
				x.innerText = values[i];
				if(values[i]==" "){
					x.addEventListener('click', function (e) {
					insertion(i);
					},false);
					x.style.color = "#006eff";
					x.style.cursor = "pointer";
				}

				game.appendChild(x);
			});	

			let check = (type) => {
			if(type==1){
			 values.map((x,i)=> { if(x==' '){
									 if(solution[i]==document.getElementsByClassName('cell')[i].innerText) {document.getElementsByClassName('cell')[i].style.backgroundColor = "#9ec956d4";} 
								else {document.getElementsByClassName('cell')[i].style.backgroundColor = "#ff000080"}
								}
			})
			}
			else if(type==2) {
				solution.map((x,i)=> {
					document.getElementsByClassName('cell')[i].style.background = 'transparent';
					document.getElementsByClassName('cell')[i].innerText = x;})
				}

			else {
				values.map((x,i)=> {
					document.getElementsByClassName('cell')[i].innerText = x;
					document.getElementsByClassName('cell')[i].style.background = 'transparent';
				})
				}
			}
		
		}
		
	</script>
	<script>
			if('serviceWorker' in navigator) {
			  navigator.serviceWorker
					   .register('service-worker.js')
					   .then(function() { console.log("Service Worker Registered"); });
			}

</script>
	
</html>